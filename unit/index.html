<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/bower_components/qunit/qunit/qunit.css" />
        <style type="text/css">
            body {
                background: #DEE0E0;;
            }
            #tests {
                width: 50%;
                float:left;
            }
            #qunit {
                width: 50%;
                float:left;
            }
            .testSquare {
                background: gray;
                color: white;
                width: 85%;
                min-height: 100px;
                float: left;
                margin: 15px 5%;
                padding: 10px;
            }

            .gold {
                background: goldenrod;
            }

        </style>
        <title>PageJS Testing</title>
    </head>
    <body>
        <div id="tests">
            <h1 style="text-align: center;">DOM Test Environment</h1>
            <div data-x-controller="parentNode">
                <div id="element1Node" class="testSquare" data-x-controller="element1Node">
                    element1Node
                    <div data-x-node="node" id="selector1"></div>
                </div>
                <div id="element2Node" class="testSquare" data-x-controller="element2Node">
                    element2Node
                </div>
            </div>
            <div style="float:left; width:100%;">
                <h1 style="text-align: center;">End To End Tests</h1>
                <div class="testSquare gold" data-x-controller="mvvm">
                    <b>MVVM Tests</b>
                    <h3 data-x-bind="form.value" style="margin: 0;"></h3>
                    <input type="text" data-x-model="form.value">
                    <input type="password" data-x-model="form.value" />
                    <input type="checkbox" data-x-model="form.value" />
                    <input type="radio" data-x-model="form.value" value="Yes" />Yes
                    <input type="radio" data-x-model="form.value" value="No" />No
                    <textarea data-x-model="form.value"></textarea>
                    <select data-x-model="form.value">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    Filter: <span data-x-bind="form.value" data-x-filter="josh"></span>
                </div>
                <div class="testSquare gold" data-x-controller="click">
                    <b>Click Tests</b>
                    <div style="float:left; width: 100%;">
                        <div style="width: 75px; height: 75px; background: grey; float:left; cursor: pointer;" data-x-aspect="events" data-click="clicked">
                            Click Here!
                        </div>
                        <h3 data-x-node="message" style="width: 100%; float:left;color: red;">Click Successful!</h3>
                    </div>
                </div>
                <div class="testSquare gold" data-x-controller="aspectWithController">
                    <b>Aspect With Controllers</b>
                    <div data-x-aspect="list list" data-list="list1.data" data-title="List1"></div>
                    <div data-x-aspect="list" data-list="list2.data" data-title="List2"></div>
                </div>
                <div class="testSquare gold" data-x-controller="aspectWithOutController">
                    <b>Aspect Without Controller</b>
                    <div data-x-aspect="red">Red</div>
                    <div data-x-aspect="red blue">Red Blue</div>
                    <div data-x-aspect="textbox"></div>
                </div>
            </div>
        </div>
        <div id="qunit"></div>
        <div id="qunit-fixture"></div>
        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.js"></script>
        <script type="text/javascript" src="/bower_components/qunit/qunit/qunit.js"></script>
        <script type="text/javascript" src="/js/x.js"></script>

        <!--x extensions -->
        <script type="text/javascript" src="/js/extend/x/events.js"></script>

        <!--controller extensions -->
        <script type="text/javascript" src="/js/extend/controller/parent.js"></script>
        <script type="text/javascript" src="/js/extend/controller/children.js"></script>

        <!--view extensions -->
        <script type="text/javascript" src="/js/extend/view/parent.js"></script>
        <script type="text/javascript" src="/js/extend/view/accessor.js"></script>
        <script type="text/javascript" src="/js/extend/view/node.js"></script>

        <!--pattern extensions -->
        <script type="text/javascript" src="/js/extend/mvvm.js"></script>
        <script type="text/javascript" src="/js/extend/aspects.js"></script>

        <!--aspects -->
        <script type="text/javascript" src="/js/aspects/events.js"></script>

        <!--unit -->
        <script type="text/javascript" src="/unit/unit.js"></script>

        <!--MVVM Check-->
        <script type="text/javascript">
            (function ($) {
                $(function () {
                    $.x.filter('josh', function (value) {
                        return 'Josh + ' + value;
                    });
                    $.x.controller('mvvm', function (controller, view) {
                        view.form = {value: 'Yes'};
                        controller.update(function () {
                            console.log(view);
                        });
                    });
                });
            })(jQuery);
        </script>

        <!-- Click Check -->
        <script type="text/javascript">
            (function ($) {
                $(function () {
                    $.x.controller('click', function (controller, view) {
                        view.btnClicked = false;

                        controller.update(function () {
                            if (view.btnClicked) {
                                view.node('message').show();
                            } else {
                                view.node('message').hide();
                            }
                        });

                        controller.clicked = function (event, element, attributes) {
                            view.btnClicked = true;
                            view.apply();
                        };
                    });
                });
            })(jQuery);
        </script>

        <!--Aspects W/ Controller Check-->
        <script type="text/javascript">
            (function ($) {
                $(function () {
                    $.x.aspect(true, 'list', function (controller, view, element, attributes) {
                        controller.update(function () {
                            var data = ('dataList' in attributes) ? view.accessor(attributes.dataList) : [];
                            var title = ('dataTitle' in attributes) ? attributes.dataTitle : '';
                            element.empty();
                            element.append('<h4>' + title + '</h4>');
                            if (data) {
                                element.append('<ul></ul>');
                                $.each(data, function (i, value) {
                                    element.find('ul').append('<li>' + value + '</li>')
                                });
                            }
                        });
                    });

                    $.x.controller('aspectWithController', function (controller, view) {
                        view.list1 = {
                            data: ['a', 'b', 'c']
                        };

                        view.list2 = {
                            data: ['d', 'e', 'f']
                        };
                    });
                });
            })(jQuery);
        </script>

        <!-- Aspect W/O Controllers Check -->
        <script type="text/javascript">
            (function ($) {
                $(function () {
                    $.x.aspect('red', function (element, attributes) {
                        element.css({color: 'red'});
                    });

                    $.x.aspect('blue', function (element, attributes) {
                        element.css({color: 'blue'});
                    });

                    $.x.aspect('textbox', function (element, attributes) {
                        element.append('<input type="text" data-x-model="test">');
                    });

                    $.x.controller('aspectWithOutController', function (controller, view) {
                        controller.update(function () {
                            console.log(view);
                        });
                    });
                });
            })(jQuery);
        </script>
    </body>
</html>