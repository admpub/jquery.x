/*
Package: jquery.x
Version: 1.5.0
Build Date: 06-09-2015 2:18:20AM
*/
!function(a){"use strict";var b=function(){var b={_abstractView:{_id:!1,_addExtension:function(a,b){this[a]=b}},_abstractController:{_id:!1,_addExtension:function(a,b){this[a]=b},$:function(b){var c=a('[data-x-controller="'+this._id+'"]');return b?c.find(b):c}},_addExtension:function(a,b){this[a]=b},_myController:function(b){var c=a(b).parents("[data-x-controller]")[0];return c?c.attributes["data-x-controller"].value:!1},_controllers:{},extend:{x:function(b,c){return a.type(b)===a.x.type.string&&b?a.type(c)!==a.x.type["function"]?a.x.error("Extension factory must be a function"):void a.x._addExtension(b,c()):a.x.error("Extension ID must be a string")},controller:function(b,c){return a.type(b)===a.x.type.string&&b?a.type(c)!==a.x.type["function"]?a.x.error("Extension factory must be a function"):void a.x._abstractController._addExtension(b,c()):a.x.error("Extension ID must be a string")},view:function(b,c){return a.type(b)===a.x.type.string&&b?a.type(c)!==a.x.type["function"]?a.x.error("Extension factory must be a function"):void a.x._abstractView._addExtension(b,c()):a.x.error("Extension ID must be a string")}},controller:function(b,c){if(!b)return this.error("A controller ID is required");if(!this.isController(b)){var d=a('[data-x-controller="'+b+'"]');if(0===d.length)return this.error("Controller binding could not be found");if(d.length>1)return this.error("Controllers can only be bound once");var e=this;this._controllers[b]=function(b){var c,d=a("[data-x-controller="+b+"]").parents("[data-x-controller]");if(d.length>0){var f=d[0],g=a(f).attr("data-x-controller"),h=e.controller(g);c=Object.create(h)}else c=Object.create(e._abstractController);return c._id=b,c._view=function(){var a=c.parent();return a?Object.create(a._view):Object.create(e._abstractView)}(),c._view._id=b,c}(b)}return c&&(c(this._controllers[b],this._controllers[b]._view),a.type(this._controllers[b]._view.apply)===this.type["function"]&&this._controllers[b]._view.apply()),this._controllers[b]},isController:function(a){return this._controllers[a]?!0:!1},error:function(a){var b="            _  _      ___  ____  ____ __   ___\n ________  | |/ /    / _ |  __/|  __/ _ `|  __|  ________\n/___/___/   >  <    |  __/ |   | | | (_) | |    /___/___/\n           /_/|_|    |___|_|   |_| |____/|_|\n";window.console&&console.debug&&console.debug(b);var c=new Error(a);return window.console&&console.log&&console.log(c.stack),c}};return b.type={},b.type.object="object",b.type["function"]="function",b.type.string="string",b.type.undefined="undefined",b.type.array="array",b.type["boolean"]="boolean",b};a.x=b()}(jQuery),function(a){a(function(){a.x.extend.x("_events",function(){return{}}),a.x.extend.x("broadcast",function(){return function(b,c){return a.type(b)===a.x.type.string&&b?void(a.x._events[b]&&a.each(a.x._events[b],function(a,b){b(c)})):a.x.error("Event ID must be a string")}}),a.x.extend.x("on",function(){return function(b,c){return a.type(b)===a.x.type.string&&b?a.type(c)!==a.x.type["function"]?a.x.error("Event handler must be a function"):(a.x._events[b]||(a.x._events[b]=[]),a.x._events[b].push(c),this):a.x.error("Event ID must be a string")}})})}(jQuery),function(a){a(function(){a.x.extend.controller("accessor",function(){return function(b,c){if("string"!==a.type(b))return a.x.error("Property must be a string");var d=b.split("."),e=this;return a.type(c)===a.x.type.undefined?(a.each(d,function(a,b){if("parent()"===b){if("function"!=typeof e.parent)return!1;e=e.parent()}else{if(!e)return;e=function(a,b){return a[b]}(e,b)}}),e):(a.each(d,function(b,f){if("parent()"===f){if("function"!=typeof e.parent)return!1;e=e.parent()}else d.length===b+1?e[f]=c:e&&(e=function(){return e[f]||(e[f]={}),a.type(e[f])!==a.x.type.object&&a.type(e[f])!==a.x.type.array?!1:e[f]}())}),e?this:!1)}})})}(jQuery),function(a){a(function(){a.x.extend.controller("children",function(){return function(){var b=this,c=b.$().find("[data-x-controller]");if(c.length>0){var d=[];return c.each(function(){var c=a(this).attr("data-x-controller"),e=a.x.controller(c);e.parent()._id===b._id&&d.push(e)}),d}return!1}})})}(jQuery),function(a){a(function(){a.x.extend.controller("parent",function(){return function(){var a=Object.getPrototypeOf(this);return a._id?a:!1}})})}(jQuery),function(a){a(function(){a.x.extend.view("accessor",function(){return function(b,c){if("string"!==a.type(b))return a.x.error("Property must be a string");var d=b.split("."),e=this;return a.type(c)===a.x.type.undefined?(a.each(d,function(a,b){if("parent()"===b){if("function"!=typeof e.parent)return!1;e=e.parent()}else{if(!e)return;e=function(a,b){return a[b]}(e,b)}}),e):(a.each(d,function(b,f){if("parent()"===f){if("function"!=typeof e.parent)return!1;e=e.parent()}else d.length===b+1?e[f]=c:e&&(e=function(){return e[f]||(e[f]={}),a.type(e[f])!==a.x.type.object&&a.type(e[f])!==a.x.type.array?!1:e[f]}())}),e?this:!1)}})})}(jQuery),function(a){a(function(){a.x.extend.view("parent",function(){return function(){return Object.getPrototypeOf(this)}})})}(jQuery),function(a){a(function(){a.x.extend.controller("_update",function(){return function(){}}),a.x.extend.controller("update",function(){return function(a){this._update=a}}),a.x.extend.view("_applyBefore",function(){return[]}),a.x.extend.view("_apply",function(){return[]}),a.x.extend.view("apply",function(){return function(){var b=a.x.controller(this._id);a.each(this._applyBefore,function(c,d){a.type(d)===a.x.type["function"]&&d(b,b._view)}),b._update(),a.each(this._apply,function(c,d){a.type(d)===a.x.type["function"]&&d(b,b._view)});var c=b.children();c&&a.each(c,function(a,b){b._view.apply()})}}),a.x.extend.apply=function(b,c){var d,e;return a.type(b)===a.x.type["boolean"]?(d=b,e=c):(d=!1,e=b),a.type(e)!==a.x.type["function"]?a.x.error("Apply function must be a function"):void(d?a.x._abstractView._applyBefore.push(e):a.x._abstractView._apply.push(e))},a.x.extend.controller("_binds",function(){return function(){var b=this,c=new a;return b.$().find("[data-x-bind]").each(function(){var d=this;a.x._myController(d)===b._id&&c.push(d)}),c}}),a.x.extend.apply(function(b,c){var d=b._binds();d.length>0&&(d.on("change.x keyup.x",function(){if("INPUT"!==this.tagName||"text"!==this.type&&"password"!==this.type){var b;b="INPUT"===this.tagName&&"checkbox"===this.type?this.checked:this.value,c.accessor(a(this).attr("data-x-bind"),b),c.apply()}else a(this).data("val")!==this.value&&(c.accessor(a(this).attr("data-x-bind"),this.value),c.apply()),a(this).data("val",this.value)}),d.addClass("x-mvvm")),b._binds().each(function(){var b=this,d=a(b),e=b.tagName,f=c.accessor(d.attr("data-x-bind"));if(!d.is(":focus"))switch(e){case"INPUT":"radio"===d.attr("type")?d.val()===f?d.prop("checked",!0):d.prop("checked",!1):"checkbox"===d.attr("type")?f?d.prop("checked",!0):d.prop("checked",!1):d.val(f);break;case"SELECT":d.val(f);break;case"TEXTAREA":d.val(f);break;default:d.html(f)}})})})}(jQuery),function(a){a(function(){a.x.extend.x("_plugins",function(){return{}}),a.x.extend.x("plugin",function(){return function(b,c,d){var e,f,g;return a.type(c)===a.x.type["boolean"]?(f=b,e=c,g=d):(f=b,e=!1,g=c),a.type(f)===a.x.type.string&&f?a.type(g)!==a.x.type["function"]?this.error("plugin initHandler must be a function"):void(this._plugins[f]={controller:e,handler:g}):this.error("plugin name must be a string")}}),a.x.extend.apply(function(b,c){var d=function(b){var c={};return a.each(b.attributes,function(){if(this.specified){var a=this.name.replace(/\W+(.)/g,function(a,b){return b.toUpperCase()});c[a]=this.value}}),c},e=b.$().find("[data-x-plugin]:not(.x-plugin)");if(e&&e.length>0){var f=!1;a.each(e,function(c,e){if(a.x._myController(e)===b._id){a(e).addClass("x-plugin");var g=a(e).attr("data-x-plugin").split(" ");a.each(g,function(b,c){if(!a.x._plugins[c])return a.x.error('The plugin "'+c+'" is not defined');if(a.x._plugins[c].controller){var g,h;a(e).attr("data-x-controller")?g=a(e).attr("data-x-controller"):(g="E"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),a(e).attr("data-x-controller",g)),h=a.x.controller(g),a.x._plugins[c].handler(h,h._view,a(e),d(e))}else f=!0,a.x._plugins[c].handler(a(e),d(e))})}}),f&&a.each(b._view._apply,function(c,d){a.type(d)===a.x.type["function"]&&d(b,b._view)})}})})}(jQuery);